<%= render 'shared/filterbar' %>

<div class="content">

  <div class="results">

    <% if @rides.empty? %>
      <div class="error-banner">
          <div class="card" style="height:100%">
            <i class="fas fa-times-circle" style="font-size:96px"></i>
            <h1> Sorry, no registered spot near <%= params[:location] %> ðŸ˜• </h1>
            <h3 style="text-align: center"> Please search again by selecting another location or time. </h3>
          </div>
      </div>

    <%else %>

      <%= link_to  ride_path(@rides.first), target: :_blank do %>
        <div class="first_card">
          <h1><%= @rides&.first&.beach&.name %></h1>
          <h2><%= @rides&.first&.scoring %></h2>
        </div>
      <% end %>

      <div class="cards">
        <% @rides.each_with_index do |ride, index| %>
          <% next if index == 0 %>
            <%= link_to ride_path(ride), target: :_blank do %>
              <div id="outer-card">
                <div class="card">
                  <h2> <%= ride.beach.name %> </h2>
                  <h4 id="card-info"> <%= ride.beach.city %> </h4>
                </div>
                <div>
                  <h4 id="card-info"><%= ride.scoring %> </h4>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>

    <% end %>
  </div>

  <% if @rides.empty? %>
  <% else %>
    <div
      id="map"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  <% end %>

</div>
